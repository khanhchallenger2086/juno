var getCookie=function(a){return document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+a+"\\s*\\\x3d\\s*([^;]*).*$)|^.*$"),"$1")||null},setCookie=function(a,c,b,e,d){a=a+"\x3d"+c+"; path\x3d/; expires\x3d"+(new Date(e+1E3*b)).toUTCString()+"; max-age\x3d"+b;d&&(a+="; domain\x3d"+d);document.cookie=a},PRODUCT_VIEW_COOKIE="_hist_prv",LAST_VISIT_COOKIE="_lst_visit_p",JUNO_DISPLAY_CLASS=".juno-recommender",IS_SHOW_RECOMMENDER="none"!==$(JUNO_DISPLAY_CLASS).css("display")&&"hidden"!==$(JUNO_DISPLAY_CLASS).css("visibility"),
TRACKING_URL="https://t-junors.hoian.ai/recommender_tracking.js",KEY=Math.random().toString(36).substring(7),RECOMMEND_ID=generateRecommendId(),GA_ID=getCookie("_ga"),trackingId=getCookie("_stid"),sessionId=getCookie("_ss"),urlScript=document.currentScript.src,urlParams=new URLSearchParams(urlScript),channel=getParameterByName("?channel",urlParams),clientId=getParameterByName("client",urlParams),zoneId=getParameterByName("zone",urlParams),pageviewId=getParameterByName("pageview",urlParams),storeId=
getParameterByName("store",urlParams),style=getParameterByName("style",urlParams),elementIframe=clientId+"-"+pageviewId+"-"+zoneId;function generateRecommendId(){return Math.floor(1E10*Math.random()).toString()}function getParameterByName(a,c){a=a.replace(/[\[\]]/g,"\\$\x26");return(a=(new RegExp("[?\x26]"+a+"(\x3d([^\x26#]*)|\x26|#|$)")).exec(c))?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}
function callHttp(){var a=$("#product-select").find(":selected").attr("data-barcode");a||(a=null);var c=null!=getCookie(LAST_VISIT_COOKIE);setCookie(LAST_VISIT_COOKIE,(new Date).getTime());var b=getCookie(PRODUCT_VIEW_COOKIE);b&&(a=a?a+","+b.split(",",3):b.split(",",3));c=(new URL(urlScript)).origin+"/recommender/"+clientId+"/"+trackingId+"\x26"+sessionId+"\x26"+channel+"\x26"+zoneId+"\x26"+pageviewId+"\x26"+storeId+"\x26"+style+"\x26"+RECOMMEND_ID+"\x26"+a+"\x26"+c;b=document.createElement("iframe");
b.src=c;document.body.appendChild(b);b.setAttribute("frameBorder","0");b.setAttribute("width","100%");b.setAttribute("height","100%");document.getElementById(elementIframe).appendChild(b);isRecomScriptLoaded(TRACKING_URL)||(c=document.createElement("script"),c.src=TRACKING_URL,c.async=!0,document.head.appendChild(c));a&&setCookie(PRODUCT_VIEW_COOKIE,a)}function isRecomScriptLoaded(a){for(var c=document.getElementsByTagName("script"),b=c.length;b--;)if(c[b].src==a)return!0;return!1}
IS_SHOW_RECOMMENDER&&callHttp();var recommenderTop=$("#"+elementIframe).offset().top;function isViewable(a){return $(window).scrollTop()+$(a).height()>=recommenderTop}IS_SHOW_RECOMMENDER&&(viewableEvent(),window.onscroll=function(){viewableEvent()});
function viewableEvent(){if(isViewable("#"+elementIframe)&&!sessionStorage.getItem(KEY))try{sessionStorage.setItem(KEY,!0),rstracking.signal(rstracking.event_viewable,{tkid:trackingId,ssid:sessionId,recid:RECOMMEND_ID,_ga:GA_ID,chid:channel,clid:clientId,znid:zoneId,pwid:pageviewId,stid:storeId,sty:style})}catch(a){console.log(a)}};